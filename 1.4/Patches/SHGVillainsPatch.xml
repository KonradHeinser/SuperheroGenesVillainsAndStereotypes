<?xml version="1.0" encoding="utf-8" ?>
<Patch>
    <Operation Class="PatchOperationConditional">
        <xpath>Defs/ThingDef[defName="Uranium"]/statBases/RoyalFavorValue</xpath>
        <nomatch Class="PatchOperationAdd">
            <xpath>/Defs/ThingDef[defName="Uranium"]/statBases</xpath>
            <value>
                <RoyalFavorValue>0.009</RoyalFavorValue>
            </value>
        </nomatch>
    </Operation>

    <Operation Class="PatchOperationConditional">
        <xpath>Defs/ThingDef[defName="Jade"]/statBases/RoyalFavorValue</xpath>
        <nomatch Class="PatchOperationAdd">
            <xpath>/Defs/ThingDef[defName="Jade"]/statBases</xpath>
            <value>
                <RoyalFavorValue>0.0075</RoyalFavorValue>
            </value>
        </nomatch>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>Defs/QuestScriptDef[defName="Util_ChooseRandomQuestLodgerKind"]/root/nodes/li/node/choices</xpath>
        <value>
            <li>
                <factionDef>SuperVillainGang</factionDef>
                <pawnKinds>
                    <li>SHG_VillainLaborer</li>
                </pawnKinds>
            </li>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>Defs/QuestScriptDef[defName="Util_ChooseRandomQuestHelperKind"]/root/nodes/li/choices</xpath>
        <value>
            <li>
                <factionDef>SuperVillainGang</factionDef>
                <pawnKinds>
                    <li>SHG_VillainTrooper</li>
                    <li>SHG_VillainSniper</li>
                    <li>SHG_VillainSlasher</li>
                </pawnKinds>
            </li>
        </value>
    </Operation>

    <Operation Class="PatchOperationReplace">
        <xpath>Defs/ResearchProjectDef/heldByFactionCategoryTags/li[text()="Empire"]</xpath>
        <value>
            <li>Empire</li>
            <li>SuperVillainGang</li>
        </value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>Defs/QuestScriptDef[defName="Mission_BanditCamp"]/root/factionsToDrawLeaderFrom</xpath>
        <value><li>SuperVillainGang</li></value>
    </Operation>

    <Operation Class="PatchOperationAdd">
        <xpath>Defs/StorytellerDef[@Name="BaseStoryteller"]/comps</xpath>
        <value>
            <li Class="StorytellerCompProperties_SingleOnceFixed">
                <fireAfterDaysPassed>12</fireAfterDaysPassed>
                <incident>SHG_GiveQuest_VillainStart</incident>
                <skipIfOnExtremeBiome>false</skipIfOnExtremeBiome>
                <allowedTargetTags>
                    <li>World</li>
                </allowedTargetTags>
                <enableIfAnyModActive>
                    <li>Ludeon.RimWorld.Royalty</li>
                </enableIfAnyModActive>
            </li>
            <li Class="StorytellerCompProperties_RefiringUniqueQuest">
                <minDaysPassed>60</minDaysPassed>
                <refireEveryDays>30</refireEveryDays>
                <incident>SHG_GiveQuest_EndGame_ArmageddonClock</incident>
                <allowedTargetTags>
                    <li>World</li>
                </allowedTargetTags>
                <enableIfAnyModActive>
                    <li>Ludeon.RimWorld.Royalty</li>
                </enableIfAnyModActive>
            </li>
        </value>
    </Operation>

    <Operation Class="SuperHeroGenesBase.PatchOperationSetting">
        <setting>medievalVillains</setting>
        <active Class="PatchOperationSequence">
            <operations>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/PawnKindDef[defName="SHG_VillainTrooper"]/weaponTags</xpath>
                    <value>
                        <weaponTags>
                            <li>NeolithicRangedDecent</li>
                            <li>MedievalRanged</li>
                            <li>MedievalRangedHeavy</li>
                        </weaponTags>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/PawnKindDef[defName="SHG_VillainSniper"]/weaponTags</xpath>
                    <value>
                        <weaponTags Inherit="False">
                            <li>NeolithicRangedChief</li>
                            <li>MedievalRangedHeavy</li>
                        </weaponTags>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/PawnKindDef[defName="SHG_VillainBoss"]/weaponTags</xpath>
                    <value>
                        <weaponTags>
                            <li>NeolithicRangedChief</li>
                            <li>MedievalRangedHeavy</li>
                        </weaponTags>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/PawnKindDef[defName="SHG_VillainBoss"]/techHediffsChance</xpath>
                    <value><techHediffsChance>0</techHediffsChance></value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/PawnKindDef[defName="SHG_VillainTrooper" or defName="SHG_VillainSlasher" or defName="SHG_VillainBoss"]/apparelTags</xpath>
                    <value>
                        <apparelTags>
                            <li>MedievalMilitary</li>
                            <li>MedievalArmorDecent</li>
                        </apparelTags>
                    </value>
                </li>
                <li Class="PatchOperationReplace">
                    <xpath>Defs/PawnKindDef[defName="SHG_VillainLaborer"]/apparelTags</xpath>
                    <value>
                        <apparelTags>
                            <li>Neolithic</li>
                            <li>Medieval</li>
                        </apparelTags>
                    </value>
                </li>
            </operations>
        </active>
    </Operation>

    <Operation Class="SuperHeroGenesBase.PatchOperationSetting">
        <setting>vengefulOne</setting>
        <inactive Class="PatchOperationRemove">
            <xpath>Defs/ScenarioDef[defName="SHG_TheVengefulOne"]/scenario/parts/li[@Class="ScenPart_ForcedHediff"]</xpath>
        </inactive>
    </Operation>

</Patch>
